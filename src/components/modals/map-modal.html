<div class="map-modal modal">
	<div class="modal-back"></div>
	<div class="modal-wrapper">
		<div class="modal-exit">
			<button class="btn-circle mobile">
				<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
					<path
						d="M14 8.5C14.2761 8.5 14.5 8.27614 14.5 8C14.5 7.72386 14.2761 7.5 14 7.5V8.5ZM1.64645 7.64645C1.45118 7.84171 1.45118 8.15829 1.64645 8.35355L4.82843 11.5355C5.02369 11.7308 5.34027 11.7308 5.53553 11.5355C5.7308 11.3403 5.7308 11.0237 5.53553 10.8284L2.70711 8L5.53553 5.17157C5.7308 4.97631 5.7308 4.65973 5.53553 4.46447C5.34027 4.2692 5.02369 4.2692 4.82843 4.46447L1.64645 7.64645ZM14 7.5H2V8.5H14V7.5Z"
						fill="#330D03" />
				</svg>
			</button>
			<button class="desktop">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
					<path fill-rule="evenodd" clip-rule="evenodd"
						d="M1.28933 1.2963C1.68182 0.907753 2.31818 0.907753 2.71067 1.2963L22.6094 20.995C23.0019 21.3836 23.0019 22.0136 22.6094 22.4021C22.2169 22.7906 21.5806 22.7906 21.1881 22.4021L1.28933 2.70335C0.896839 2.31481 0.896839 1.68485 1.28933 1.2963Z"
						fill="#FFF4DA" />
					<path fill-rule="evenodd" clip-rule="evenodd"
						d="M1.28977 22.7033C0.897279 22.3147 0.897279 21.6848 1.28977 21.2962L21.1885 1.59748C21.581 1.20894 22.2173 1.20894 22.6098 1.59748C23.0023 1.98603 23.0023 2.61599 22.6098 3.00454L2.71111 22.7033C2.31862 23.0918 1.68226 23.0918 1.28977 22.7033Z"
						fill="#FFF4DA" />
				</svg>
			</button>
		</div>
		<div class="map-modal__content modal-content modal-content--first active">
			<div class="map-modal__left">
				<div class="map-modal__map" id="map-modal"></div>
			</div>
			<div class="map-modal__right">
				<div class="map-modal__card map-slide map-slide--fastfood">
					<div class="map-slide__img">
						<img src="./assets/images/main-page/main-news-1.png" alt="">
					</div>
					<div class="map-slide__content">
						<div class="map-slide__type"><span></span>фаст-фуд</div>
						<div class="map-slide__address">Можайский вал, 10</div>
						<div class="map-slide__time">08:00 - 20:00</div>
						<div class="map-slide__underground">
							<p>
								<span>
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="19" viewBox="0 0 24 19"
										fill="none">
										<path
											d="M12.097 0C5.74571 0 0.596741 5.69056 0.596741 12.7103C0.596741 16.5166 2.09714 18.9989 2.09714 18.9989L22.092 19C22.092 19 23.5967 16.287 23.5967 12.71C23.5967 5.69056 18.4478 0 12.097 0ZM21.2485 17.4516L2.98181 17.4429C2.98181 17.4429 2.00845 15.4248 2.00845 12.6702C2.00845 6.51766 6.54242 1.52969 12.1355 1.52969C17.7284 1.52969 22.2626 6.5174 22.2626 12.6702C22.2629 15.456 21.2485 17.4516 21.2485 17.4516Z"
											fill="#330D03" />
										<path
											d="M15.3469 4.08307L15.2026 4.08282L12.135 10.0938L8.95708 4.03149L4.60602 14.9832H3.48157V15.8629H9.64173V14.9832H8.41943L9.64173 11.5605L12.135 15.8629L14.5307 11.5605L15.7527 14.9832H14.5307V15.8629H20.6417V14.9832H19.583L15.3469 4.08307Z"
											fill="#330D03" />
									</svg>
								</span>
								Студенческая
							</p>
							<p>
								<span>
									<svg xmlns="http://www.w3.org/2000/svg" width="24" height="19" viewBox="0 0 24 19"
										fill="none">
										<path
											d="M12.097 0C5.74571 0 0.596741 5.69056 0.596741 12.7103C0.596741 16.5166 2.09714 18.9989 2.09714 18.9989L22.092 19C22.092 19 23.5967 16.287 23.5967 12.71C23.5967 5.69056 18.4478 0 12.097 0ZM21.2485 17.4516L2.98181 17.4429C2.98181 17.4429 2.00845 15.4248 2.00845 12.6702C2.00845 6.51766 6.54242 1.52969 12.1355 1.52969C17.7284 1.52969 22.2626 6.5174 22.2626 12.6702C22.2629 15.456 21.2485 17.4516 21.2485 17.4516Z"
											fill="#330D03" />
										<path
											d="M15.3469 4.08307L15.2026 4.08282L12.135 10.0938L8.95708 4.03149L4.60602 14.9832H3.48157V15.8629H9.64173V14.9832H8.41943L9.64173 11.5605L12.135 15.8629L14.5307 11.5605L15.7527 14.9832H14.5307V15.8629H20.6417V14.9832H19.583L15.3469 4.08307Z"
											fill="#330D03" />
									</svg>
								</span>
								Киевская
							</p>
						</div>
						<div class="map-slide__btn">
							<button class="small-btn">проложить маршрут</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script>
	document.addEventListener('DOMContentLoaded', () => {
		// console.log(1)
		const mapModalMarkers = [
			{
				address: 'Можайский вал, 10',
				coordinate: [37.528583852499565, 55.73236309372132],
				active: true,
				type: 'fast-food',
			}
		];
		document.querySelector('[data-modal="map"]').addEventListener('click', () => {
			initModalMap();
		});
		async function initModalMap() {
			await ymaps3.ready;
			const { YMap, YMapDefaultSchemeLayer, YMapDefaultFeaturesLayer, YMapMarker } = ymaps3;
			const mapModal = new YMap(document.getElementById('map-modal'), {
				location: {
					center: [37.588144, 55.733842],
					zoom: 10
				},
			});
			mapModal.addChild(new YMapDefaultSchemeLayer());
			mapModal.addChild(new YMapDefaultFeaturesLayer({ zIndex: 1800 }));

			mapModalMarkers.forEach((el) => {
				let content = document.createElement('div');
				content.classList.add('marker', el.type);
				content.insertAdjacentHTML('beforeend', `<img src="./assets/images/icons/marker-map.svg" alt="">`);
				el.active ? content.classList.add('active') : null;
				const markerModal = new YMapMarker({ coordinates: el.coordinate, draggable: false, zIndex: 5000, hideOutsideViewport: false }, content);
				mapModal.addChild(markerModal);
			})
			document.querySelector('.map-modal .modal-back').addEventListener('click', () => setTimeout(() => mapModal.destroy(), 500))
			document.querySelector('.map-modal .modal-exit').addEventListener('click', () => setTimeout(() => mapModal.destroy(), 500))
		}
	})

</script>